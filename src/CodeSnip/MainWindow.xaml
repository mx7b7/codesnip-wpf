<mah:MetroWindow
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
         xmlns:mah="http://metro.mahapps.com/winfx/xaml/controls"
        xmlns:avalonEdit="http://icsharpcode.net/sharpdevelop/avalonedit"
        xmlns:behaviors="clr-namespace:Microsoft.Xaml.Behaviors;assembly=Microsoft.Xaml.Behaviors"
        xmlns:helpers="clr-namespace:CodeSnip.Helpers"
        xmlns:local="clr-namespace:CodeSnip"
        xmlns:settingsView="clr-namespace:CodeSnip.Views.SettingsView"
        xmlns:langCatView="clr-namespace:CodeSnip.Views.LanguageCategoryView"
        xmlns:snippetView="clr-namespace:CodeSnip.Views.SnippetView"
        xmlns:codeRunnerView="clr-namespace:CodeSnip.Views.CodeRunnerView"
        xmlns:compilerSettingsView="clr-namespace:CodeSnip.Views.CompilerSettingsView"
        xmlns:highlightingEditorView="clr-namespace:CodeSnip.Views.HighlightingEditorView"
        xmlns:controlzex="urn:controlzex"
        x:Class="CodeSnip.MainWindow"
        d:DataContext="{d:DesignInstance Type={x:Type local:MainViewModel}}"
        mc:Ignorable="d"
		d:Width="400" d:Height="400" 
        Title ="{Binding WindowTitle}" MinWidth="600" MinHeight="400" 
        Closing="MetroWindow_Closing" 
        Left="{Binding WindowX, Mode=TwoWay}" Top="{Binding WindowY, Mode=TwoWay}" 
        Width="{Binding WindowWidth, Mode=TwoWay}" Height="{Binding WindowHeight, Mode=TwoWay}" >
    <!--WindowButtonCommandsOverlayBehavior="Never"-->
    <mah:MetroWindow.Resources>
        
        <helpers:InverseBooleanConverter x:Key="InverseBooleanConverter" />
        <helpers:EnumToBooleanConverter x:Key="EnumToBooleanConverter" />
        <helpers:BoolToVisibilityConverter x:Key="BoolToVisibilityConverter" />
        
        <DataTemplate DataType="{x:Type settingsView:SettingsViewModel}">
            <settingsView:SetingsView />
        </DataTemplate>
        <DataTemplate DataType="{x:Type codeRunnerView:CodeRunnerViewModel}">
            <codeRunnerView:CodeRunnerView />
        </DataTemplate>
        <DataTemplate DataType="{x:Type snippetView:SnippetViewModel}">
            <snippetView:SnippetView />
        </DataTemplate>
        <DataTemplate DataType="{x:Type langCatView:LanguageCategoryViewModel}">
            <langCatView:LanguageCategoryView />
        </DataTemplate>
        <DataTemplate DataType="{x:Type compilerSettingsView:CompilerSettingsViewModel}">
            <compilerSettingsView:CompilerSettingsView />
        </DataTemplate>
        <DataTemplate DataType="{x:Type highlightingEditorView:HighlightingEditorViewModel}">
            <highlightingEditorView:HighlightingEditorView />
        </DataTemplate>
    </mah:MetroWindow.Resources>
    <mah:MetroWindow.InputBindings>
        <!-- Ctrl + S : Save snippet code -->
        <KeyBinding Key="S" Modifiers="Ctrl" Command="{Binding SaveCodeCommand}"/>
        <!-- Ctrl + A : Add new snippet -->
        <KeyBinding Key="A" Modifiers="Ctrl" Command="{Binding AddSnippetCommand}"/>
        <!-- Ctrl + E : Edit current cnippet metadata -->
        <KeyBinding Key="E" Modifiers="Ctrl" Command="{Binding EditSnippetCommand}"/>
        <!-- Ctrl + D : Delete current snippet -->
        <KeyBinding Key="D" Modifiers="Ctrl" Command="{Binding DeleteSnippetCommand}"/>
        <!-- Ctrl + L : Open Language/Category management -->
        <KeyBinding Key="L" Modifiers="Ctrl" Command="{Binding OpenLanguageCategoryCommand}"/>
        <!-- Ctrl + P : Open application settings -->
        <KeyBinding Key="P" Modifiers="Ctrl" Command="{Binding OpenSettingsCommand}"/>
        <!-- Ctrl + R : Open Code Runner window -->
        <KeyBinding Key="R" Modifiers="Ctrl" Command="{Binding OpenCodeRunnerViewCommand}"/>
        <!-- Ctrl + K : Toggle Single-Line Comment -->
        <KeyBinding Key="K" Modifiers="Ctrl"
                Command="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=ToggleSingleLineCommentCommand}" />

        <!-- Ctrl + Shift + K : Toggle Multi-Line Comment -->
        <KeyBinding Key="K" Modifiers="Ctrl+Shift"
                Command="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=ToggleMultiLineCommentCommand}" />

        <!-- Ctrl + Shift + I : Toggle Inline Block Comment (samo selekcija) -->
        <KeyBinding Key="I" Modifiers="Ctrl+Shift"
                Command="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=ToggleCommentSelectionCommand}" />
        <!--<KeyBinding Key="F" Modifiers="Ctrl" Command="{Binding SearchReplaceCommand}"/>-->
    </mah:MetroWindow.InputBindings>
    <mah:MetroWindow.LeftWindowCommands>
        <mah:WindowCommands/>
    </mah:MetroWindow.LeftWindowCommands>
    <mah:MetroWindow.RightWindowCommands>
        <mah:WindowCommands/>
    </mah:MetroWindow.RightWindowCommands>

    <mah:MetroWindow.Flyouts>
        <mah:FlyoutsControl x:Name="flyControl"/>
    </mah:MetroWindow.Flyouts>
    <Grid Margin="2,2,2,2">
        <mah:SplitView x:Name="SplitViewControl"
               DisplayMode="CompactInline"
               CompactPaneLength="0"
               OpenPaneLength="{Binding SplitViewOpenPaneLength, Mode=TwoWay}"
               IsPaneOpen="{Binding IsPaneOpen, Mode=TwoWay}"
               PaneBackground="{x:Null}" CanResizeOpenPane="True" MaximumOpenPaneLength="600" >
            <mah:SplitView.Pane>
                <Grid>
                    <GroupBox Header="Snippets" Margin="0,0,2,0">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="*"/>
                                <!-- TreeView -->
                                <RowDefinition Height="Auto"/>
                                <!-- Kontrole ispod TreeView-a -->
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            <TreeView x:Name="treeSnippets"  Grid.Row="0"
                                 ItemsSource="{Binding Languages}"
                                 SelectedItemChanged="TreeView_SelectedItemChanged" >
                                <TreeView.Resources>
                                    <!-- Ikona za jezik -->
                                    <Geometry x:Key="LanguageIcon">M9,15h6m-3,3V12M14,2v6h6M14,2H6A2,2 0 0 0 4,4v16a2,2 0 0 0 2,2h12a2,2 0 0 0 2,-2V8Z</Geometry>
                                    <!-- Ikona za kategoriju -->
                                    <Geometry x:Key="CategoryIcon">M3,6h18v2H3V6zm0,5h18v2H3v-2zm0,5h18v2H3v-2z</Geometry>
                                    <!-- Ikona za snippet -->
                                    <Geometry x:Key="SnippetIcon">M5,4h14a2,2 0 0 1 2,2v12a2,2 0 0 1 -2,2H5a2,2 0 0 1 -2,-2V6a2,2 0 0 1 2,-2zm0,2v12h14V6H5zm2,2h10v2H7V8zm0,4h6v2H7v-2z</Geometry>
                                </TreeView.Resources>
                                <TreeView.ItemContainerStyle>
                                    <Style TargetType="{x:Type TreeViewItem}">
                                        <Setter Property="IsExpanded" Value="{Binding IsExpanded, Mode=TwoWay}" />
                                        <Setter Property="IsSelected" Value="{Binding IsSelected, Mode=TwoWay}" />
                                        <Setter Property="Visibility" Value="{Binding IsVisible, Converter={StaticResource BoolToVisibilityConverter}}" />
                                    </Style>
                                </TreeView.ItemContainerStyle>
                                <!-- LANGUAGE -->
                                <TreeView.ItemTemplate>
                                    <HierarchicalDataTemplate ItemsSource="{Binding Categories}">
                                        <StackPanel Orientation="Horizontal" Margin="2">
                                            <Path Data="{StaticResource LanguageIcon}" Fill="{DynamicResource MahApps.Brushes.AccentBase}" Width="16" Height="16" Margin="0,0,5,0"/>
                                            <TextBlock Text="{Binding Name}" FontWeight="Bold" FontSize="16"/>
                                        </StackPanel>
                                        <!-- CATEGORY -->
                                        <HierarchicalDataTemplate.ItemTemplate>
                                            <HierarchicalDataTemplate ItemsSource="{Binding Snippets}">
                                                <StackPanel Orientation="Horizontal" Margin="2">
                                                    <Path Data="{StaticResource CategoryIcon}" Fill="{DynamicResource MahApps.Brushes.Accent}" Width="14" Height="14" Margin="0,0,5,0"/>
                                                    <TextBlock Text="{Binding Name}" FontWeight="SemiBold" FontSize="14"/>
                                                </StackPanel>
                                                <!-- SNIPPET -->
                                                <HierarchicalDataTemplate.ItemTemplate>
                                                    <DataTemplate>
                                                        <StackPanel Orientation="Horizontal" Margin="2">
                                                            <Path Data="{StaticResource SnippetIcon}" Fill="#FF33D246" Width="12" Height="12" Margin="0,0,5,0"/>
                                                            <TextBlock Text="{Binding Title}" FontSize="14"/>
                                                        </StackPanel>
                                                    </DataTemplate>
                                                </HierarchicalDataTemplate.ItemTemplate>
                                            </HierarchicalDataTemplate>
                                        </HierarchicalDataTemplate.ItemTemplate>
                                    </HierarchicalDataTemplate>
                                </TreeView.ItemTemplate>
                            </TreeView>
                            <!-- Kontrole ispod TreeView-a -->
                            <Grid Grid.Row="1" Margin="0,10,0,0">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <!-- Labela Description -->
                                    <RowDefinition Height="*"/>
                                    <!-- TextBox za Description -->
                                    <RowDefinition Height="Auto"/>
                                    <!-- Labela Tag -->
                                    <RowDefinition Height="Auto"/>
                                    <!-- TextBox za Tag -->
                                    <RowDefinition Height="Auto"/>
                                    <!-- RadioButtons i Filter -->
                                </Grid.RowDefinitions>
                                <!-- Description label -->
                                <TextBlock Text="Description:" Margin="0,5,0,5" Grid.Row="0" />
                                <!-- Description TextBox koji se rasteže -->
                                <TextBox x:Name="txtDescription" Grid.Row="1" TextWrapping="Wrap" 
                                    VerticalScrollBarVisibility="Auto"  Height="80" IsReadOnly="True"
                                          Text="{Binding SelectedSnippet.Description}" Focusable="False"/>
                                <!-- Tag label -->
                                <TextBlock Text="Tag:" Margin="0,10,0,5" Grid.Row="2" />
                                <!-- Tag TextBox -->
                                <TextBox x:Name="txtTag" Grid.Row="3" Text="{Binding SelectedSnippet.Tag}" IsReadOnly="True" Focusable="False"/>
                                <!-- RadioButtons i Filter -->
                                <Grid Margin="0,10,0,0" VerticalAlignment="Center" Grid.Row="4">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto" />
                                        <!-- RadioButton "by Name" -->
                                        <ColumnDefinition Width="Auto" />
                                        <!-- RadioButton "by Tag" -->
                                        <ColumnDefinition Width="10" />
                                        <!-- Razmak -->
                                        <ColumnDefinition Width="*" />
                                        <!-- TextBox za filter -->
                                    </Grid.ColumnDefinitions>

                                    <RadioButton x:Name="rbName" Content="by Name" GroupName="FilterMode"
                                                 Grid.Column="0" VerticalAlignment="Center" ToolTip="Search by Name"
                                                 IsChecked="{Binding FilterMode, Converter={StaticResource EnumToBooleanConverter}, ConverterParameter=Name}" />
                                    <RadioButton x:Name="rbTag" Content="by Tag" Grid.Column="1" Margin="10,0,0,0"  GroupName="FilterMode"
                                                 VerticalAlignment="Center"  ToolTip="Search by Tag"
                                                 IsChecked="{Binding FilterMode, Converter={StaticResource EnumToBooleanConverter}, ConverterParameter=Tag}" />
                                    <TextBox x:Name="txtFilter" mah:TextBoxHelper.Watermark="Search snippets..." 
                                         Grid.Column="3" VerticalAlignment="Center"
                                             IsEnabled="{Binding IsFilteringEnabled, Mode=TwoWay}"
                                             Text="{Binding FilterText, UpdateSourceTrigger=PropertyChanged}" />
                                </Grid>
                            </Grid>
                        </Grid>
                    </GroupBox>
                </Grid>
            </mah:SplitView.Pane>
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <!-- Toolbar -->
                    <RowDefinition Height="*" />
                    <!-- AvalonEdit -->
                    <RowDefinition Height="Auto" />
                    <!-- Status bar -->
                </Grid.RowDefinitions>
                <!--<StackPanel Grid.Row="0" Orientation="Horizontal">-->
                <ToolBarTray Grid.Row="0">
                    <ToolBar x:Name="toolbarMain" Height="40" >
                        <Button Command="{Binding TogglePanelCommand}" ToolTip="Collapse/Expand">
                            <Path Data="{Binding OpenCloseIcon}" Fill="{DynamicResource MahApps.Brushes.AccentBase}"
                                 Width="20" Height="20" Stretch="Uniform" />
                        </Button>
                        <Button  Command="{Binding SaveCodeCommand}" Margin="10,0,0,0" ToolTip="Save snippet&#xA;CTRL+S">
                            <Path Data="{StaticResource Save}" Fill="{DynamicResource MahApps.Brushes.AccentBase}"
                             Width="20" Height="20" Stretch="Uniform" />
                        </Button>
                        <Button  Command="{Binding AddSnippetCommand}" Margin="5,0,0,0" ToolTip="Add snippet&#xA;CTRL+A">
                            <Path Data="{StaticResource FileAdd}" Fill="{DynamicResource MahApps.Brushes.AccentBase}"
                                  Width="20" Height="20" Stretch="Uniform" />
                        </Button>
                        <Button  Command="{Binding EditSnippetCommand}" Margin="5,0,0,0" ToolTip="Edit snippet&#xA;CTRL+E">
                            <Path Data="{StaticResource FileEdit}" Fill="{DynamicResource MahApps.Brushes.AccentBase}"
                                 Width="20" Height="20" Stretch="Uniform" />
                        </Button>
                        <Button  Command="{Binding DeleteSnippetCommand}" Margin="5,0,0,0" ToolTip="Delete snippet&#xA;CTRL+D">
                            <Path Data="{StaticResource Trash}" Fill="{DynamicResource MahApps.Brushes.AccentBase}"
                                 Width="20" Height="20" Stretch="Uniform" />
                        </Button>
                        <Button x:Name="btnLangCat"  Margin="5,0,0,0" Command="{Binding OpenLanguageCategoryCommand}"
                                  ToolTip="Language/Category edit&#xA;CTRL+L"
                                  IsEnabled="{Binding IsLoadSnippetEnabled, Converter={StaticResource InverseBooleanConverter}}" >
                            <Path Data="{StaticResource CategoryEdit}" Fill="{DynamicResource MahApps.Brushes.AccentBase}"
                                  Width="20" Height="20" Stretch="Uniform" />
                        </Button>
                        <Button Margin="5,0,0,0" ToolTip="Load snippets" IsEnabled="{Binding IsLoadSnippetEnabled}"
                                Command="{Binding LoadSnippetsDatabaseCommand}">
                            <Path Data="{StaticResource DatabaseRefresh}" Fill="{DynamicResource MahApps.Brushes.AccentBase}"
                                  Width="20" Height="20" Stretch="Uniform" />
                        </Button>
                        <Separator />
                        <Button Margin="5,0,0,0" ToolTip="Run&#xA;CTRL+R"
                                Command="{Binding OpenCodeRunnerViewCommand}" >
                            <Path Data="{StaticResource DebugStart}" Fill="{DynamicResource MahApps.Brushes.AccentBase}"
                                  Width="20" Height="20" Stretch="Uniform" />
                        </Button>
                        <Button Margin="5,0,0,0" ToolTip="Compiler explorer settings" 
                                Command="{Binding OpenCompilerSettingsCommand}">
                            <Path Data="{StaticResource CompilerExplorer}" Fill="{DynamicResource MahApps.Brushes.AccentBase}"
                                  Width="20" Height="20" Stretch="Uniform" />
                        </Button>
                        <Separator />
                        <Button  Margin="5,0,0,0" Command="{Binding IncreaseFontSizeCommand}" ToolTip="Zoom +">
                            <Path Data="{StaticResource ZoomIn}" Fill="{DynamicResource MahApps.Brushes.AccentBase}"
                                  Width="20" Height="20" Stretch="Uniform" />
                        </Button>
                        <Button  Margin="5,0,0,0" Command="{Binding DecreaseFontSizeCommand}" ToolTip="Zoom -">
                            <Path Data="{StaticResource ZoomOut}" Fill="{DynamicResource MahApps.Brushes.AccentBase}"
                                  Width="20" Height="20" Stretch="Uniform" />
                        </Button>
                        <Button  Margin="5,0,0,0" Command="{Binding ResetFontSizeCommand}" ToolTip="Reset zoom">
                            <Path Data="{StaticResource ZoomOutMap}" Fill="{DynamicResource MahApps.Brushes.AccentBase}"
                                  Width="20" Height="20" Stretch="Uniform" />
                        </Button>
                        <Button Margin="5,0,0,0" ToolTip="Search / Replace"  Command="{Binding SearchReplaceCommand}" >
                            <Path Data="{StaticResource TextSearch}" Fill="{DynamicResource MahApps.Brushes.AccentBase}"
                                 Width="20" Height="20" Stretch="Uniform" />
                        </Button>
                        <Button Margin="5,0,0,0" ToolTip="Format code" Click="FormatAll_Click">
                            <Path Data="{StaticResource FormatText}" Fill="{DynamicResource MahApps.Brushes.AccentBase}"
                                  Width="20" Height="20" Stretch="Uniform" />
                        </Button>
                        <Separator />
                        <Button  Margin="5,0,0,0" ToolTip="Highlighting Editor" Command="{Binding OpenHighlightingEditorCommand}">
                            <Path Data="{StaticResource ColorPaletteiOS}" Fill="{DynamicResource MahApps.Brushes.AccentBase}"
                                 Width="20" Height="20" Stretch="Uniform" />
                        </Button>
                        <Button Margin="5,0,0,0" ToolTip="Settings&#xA;CTRL+P" Command="{Binding OpenSettingsCommand}">
                            <Path Data="{StaticResource GearBold}" Fill="{DynamicResource MahApps.Brushes.AccentBase}"
                                  Width="20" Height="20" Stretch="Uniform" />
                        </Button>

                    </ToolBar>
                </ToolBarTray>
                <!--</StackPanel>-->
                <avalonEdit:TextEditor
				x:Name="textEditor"
                Grid.Row="1"
                 Margin="0,10,0,0"
				FontFamily="Consolas"
				FontSize="{Binding FontSize}"
				SyntaxHighlighting="C#"
                    ShowLineNumbers="True" 
                    HorizontalScrollBarVisibility="Visible" 
                    VerticalScrollBarVisibility="Visible" 
                    Text="" 
                    BorderBrush="{DynamicResource AccentColorBrush}"
                    ContextMenuOpening="TextEditor_ContextMenuOpening">
                    <behaviors:Interaction.Behaviors>
                        <helpers:AvalonEditTextBindingBehavior BoundText="{Binding EditorText, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                    </behaviors:Interaction.Behaviors>
                    <avalonEdit:TextEditor.ContextMenu>
                        <ContextMenu>
                            <MenuItem Header="Undo" InputGestureText="Ctrl+Z" Click="Undo_Click">
                                <MenuItem.Icon>
                                    <Path Data="{StaticResource UndoMD}" Fill="{DynamicResource MahApps.Brushes.AccentBase}"
                                          Width="16" Height="16" Stretch="Uniform" />
                                </MenuItem.Icon>
                            </MenuItem>
                            <MenuItem Header="Redo" InputGestureText="Ctrl+Y" Click="Redo_Click">
                                <MenuItem.Icon>
                                    <Path Data="{StaticResource RedoMD}" Fill="{DynamicResource MahApps.Brushes.AccentBase}"
                                          Width="16" Height="16" Stretch="Uniform" />
                                </MenuItem.Icon>
                            </MenuItem>
                            <Separator />
                            <MenuItem Header="Cut" InputGestureText="Ctrl+X" Click="Cut_Click">
                                <MenuItem.Icon>
                                    <Path Data="{StaticResource CutMD}" Fill="{DynamicResource MahApps.Brushes.AccentBase}"
                                            Width="16" Height="16" Stretch="Uniform" />
                                </MenuItem.Icon>
                            </MenuItem>
                            <MenuItem Header="Copy" InputGestureText="Ctrl+C" Click="Copy_Click">
                                <MenuItem.Icon>
                                    <Path Data="{StaticResource CopyMD}" Fill="{DynamicResource MahApps.Brushes.AccentBase}"
                                          Width="16" Height="16" Stretch="Uniform" />
                                </MenuItem.Icon>
                            </MenuItem>
                            <MenuItem Header="Paste" InputGestureText="Ctrl+V" Click="Paste_Click">
                                <MenuItem.Icon>
                                    <Path Data="{StaticResource Paste}" Fill="{DynamicResource MahApps.Brushes.AccentBase}"
                                          Width="16" Height="16" Stretch="Uniform" />
                                </MenuItem.Icon>
                            </MenuItem>
                            <Separator />
                            <MenuItem Header="Copy As">
                                <MenuItem.Icon>
                                    <Path Data="{StaticResource ContentCopy}" Fill="{DynamicResource MahApps.Brushes.AccentBase}"
                                          Width="16" Height="16" Stretch="Uniform" />
                                </MenuItem.Icon>
                                <MenuItem Header="Markdown" Click="CopyAsMarkdown_Click">
                                    <MenuItem.Icon>
                                        <Path Data="{StaticResource MarkdownFill}" Fill="{DynamicResource MahApps.Brushes.AccentBase}"
                                              Width="16" Height="16" Stretch="Uniform" />
                                    </MenuItem.Icon>
                                </MenuItem>
                                <MenuItem Header="HTML code" Click="CopyAsHtml_Click">
                                    <MenuItem.Icon>
                                        <Path Data="{StaticResource FileHtml}" Fill="{DynamicResource MahApps.Brushes.AccentBase}"
                                              Width="16" Height="16" Stretch="Uniform" />
                                    </MenuItem.Icon>
                                </MenuItem>
                                <MenuItem Header="BBCode" Click="CopyAsBBCode_Click">
                                    <MenuItem.Icon>
                                        <Path Data="{StaticResource CodeBrackets}" Fill="{DynamicResource MahApps.Brushes.AccentBase}"
                                              Width="16" Height="16" Stretch="Uniform" />
                                    </MenuItem.Icon>
                                </MenuItem>
                                <MenuItem Header="JSON String" Click="CopyAsJsonString_Click">
                                    <MenuItem.Icon>
                                        <Path Data="{StaticResource Json}" Fill="{DynamicResource MahApps.Brushes.AccentBase}"
                                              Width="16" Height="16" Stretch="Uniform" />
                                    </MenuItem.Icon>
                                </MenuItem>
                                <MenuItem Header="Base64 String" Click="CopyAsBase64String_Click">
                                    <MenuItem.Icon>
                                        <Path Data="{StaticResource Base64_TMP}" Fill="{DynamicResource MahApps.Brushes.AccentBase}"
                                              Width="16" Height="16" Stretch="Uniform" />
                                    </MenuItem.Icon>
                                </MenuItem>
                            </MenuItem>
                            <Separator />
                            <MenuItem Header="Select All" InputGestureText="Ctrl+A" Click="SelectAll_Click">
                                <MenuItem.Icon>
                                    <Path Data="{StaticResource SelectAll}" Fill="{DynamicResource MahApps.Brushes.AccentBase}"
                                          Width="16" Height="16" Stretch="Uniform" />
                                </MenuItem.Icon>
                            </MenuItem>
                            <Separator />
                            <MenuItem Header="Comment">
                                <MenuItem.Icon>
                                    <Path Data="{StaticResource CommentTextBold}" Fill="{DynamicResource MahApps.Brushes.AccentBase}"
                                          Width="16" Height="16" Stretch="Uniform" />
                                </MenuItem.Icon>
                                <MenuItem Header="Toggle SingleLine" Click="ToggleSingleLineComment_Click" InputGestureText="Ctrl+K">
                                    <MenuItem.Icon>
                                        <Path Data="{StaticResource CommentTextThin}" Fill="{DynamicResource MahApps.Brushes.AccentBase}"
                                              Width="16" Height="16" Stretch="Uniform" />
                                    </MenuItem.Icon>
                                </MenuItem>
                                <MenuItem Header="Toggle MultiLine" Click="ToggleMultiLineLineComment_Click" InputGestureText="Ctrl+Shift+K">
                                    <MenuItem.Icon>
                                        <Path Data="{StaticResource CommentTextMultipleThin}" Fill="{DynamicResource MahApps.Brushes.AccentBase}"
                                              Width="16" Height="16" Stretch="Uniform" />
                                    </MenuItem.Icon>
                                </MenuItem>
                                <MenuItem Header="Toggle Selection" Click="ToggleICommentSelection_Click" InputGestureText="Ctrl+Shift+I">
                                    <MenuItem.Icon>
                                        <Path Data="{StaticResource CommentTextMultipleThin}" Fill="{DynamicResource MahApps.Brushes.AccentBase}"
                                              Width="16" Height="16" Stretch="Uniform" />
                                    </MenuItem.Icon>
                                </MenuItem>
                            </MenuItem>
                            <Separator />
                            <MenuItem Header="Export to">
                                <MenuItem.Icon>
                                    <Path Data="{StaticResource Export}" Fill="{DynamicResource MahApps.Brushes.AccentBase}"
                                          Width="16" Height="16" Stretch="Uniform" />
                                </MenuItem.Icon>
                                <MenuItem Header="File" Click="ExportToFile_Click" >
                                    <MenuItem.Icon>
                                        <Path Data="{StaticResource FileExport}" Fill="{DynamicResource MahApps.Brushes.AccentBase}"
                                              Width="16" Height="16" Stretch="Uniform" />
                                    </MenuItem.Icon>
                                </MenuItem>
                                <MenuItem Header="Html" Click="ExportToHtml_Click">
                                    <MenuItem.Icon>
                                        <Path Data="{StaticResource FileHtml}" Fill="{DynamicResource MahApps.Brushes.AccentBase}"
                                              Width="16" Height="16" Stretch="Uniform" />
                                    </MenuItem.Icon>
                                </MenuItem>
                            </MenuItem>
                            <Separator />
                            <MenuItem Header="Format with">
                                <MenuItem.Icon>
                                    <Path Data="{StaticResource FormatText}" Fill="{DynamicResource MahApps.Brushes.AccentBase}"
                                          Width="16" Height="16" Stretch="Uniform" />
                                </MenuItem.Icon>
                                <MenuItem Header="black" Click="FormatBlack_Click">
                                    <MenuItem.Icon>
                                        <Path Data="{StaticResource Indent}" Fill="{DynamicResource MahApps.Brushes.AccentBase}"
                                              Width="16" Height="16" Stretch="Uniform" />
                                    </MenuItem.Icon>
                                </MenuItem>
                                <MenuItem Header="clang-format" Click="FormatClang_Click">
                                    <MenuItem.Icon>
                                        <Path Data="{StaticResource Indent}" Fill="{DynamicResource MahApps.Brushes.AccentBase}"
                                              Width="16" Height="16" Stretch="Uniform" />
                                    </MenuItem.Icon>
                                </MenuItem>
                                <MenuItem Header="csharpier" Click="FormatCSharpier_Click">
                                    <MenuItem.Icon>
                                        <Path Data="{StaticResource Indent}" Fill="{DynamicResource MahApps.Brushes.AccentBase}"
                                              Width="16" Height="16" Stretch="Uniform" />
                                    </MenuItem.Icon>
                                </MenuItem>
                                <MenuItem Header="dfmt" Click="FormatDfmt_Click">
                                    <MenuItem.Icon>
                                        <Path Data="{StaticResource Indent}" Fill="{DynamicResource MahApps.Brushes.AccentBase}"
                                              Width="16" Height="16" Stretch="Uniform" />
                                    </MenuItem.Icon>
                                </MenuItem>
                                <MenuItem Header="ruff" Click="FormatRuff_Click">
                                    <MenuItem.Icon>
                                        <Path Data="{StaticResource Indent}" Fill="{DynamicResource MahApps.Brushes.AccentBase}"
                                             Width="16" Height="16" Stretch="Uniform" />
                                    </MenuItem.Icon>
                                </MenuItem>
                                <MenuItem Header="rustfmt" Click="FormatRustfmt_Click">
                                    <MenuItem.Icon>
                                        <Path Data="{StaticResource Indent}" Fill="{DynamicResource MahApps.Brushes.AccentBase}"
                                              Width="16" Height="16" Stretch="Uniform" />
                                    </MenuItem.Icon>
                                </MenuItem>
                            </MenuItem>
                        </ContextMenu>
                    </avalonEdit:TextEditor.ContextMenu>
                </avalonEdit:TextEditor>
                <StatusBar Grid.Row="2">
                    <StatusBarItem Content="{Binding StatusMessage}" />
                </StatusBar>
            </Grid>
        </mah:SplitView>
    </Grid>
</mah:MetroWindow>
